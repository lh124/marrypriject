<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>“码”上结婚</title>
    <link rel="stylesheet" href="${rc.contextPath}/statics/marry/css/weui.min.css"/>
    <link rel="stylesheet" href="${rc.contextPath}/statics/marry/css/marry.css"/>
    <script type="text/javascript" src="${rc.contextPath}/statics/marry/js/reset.js"></script>
    <script type="text/javascript" src="${rc.contextPath}/statics/marry/js/echarts.min.js"></script>
   <script type="text/javascript" src="${rc.contextPath}/statics/marry/js/jquery-1.9.1.min.js"></script>
</head>
<script type="text/javascript">
    function init(){
        $.ajax({
				type: "POST",
			    url: "../weixin/me/allSign",
				dataType: "json",
				success: function(result){
				     if(result.status == 'ok'){
				          $("#smtotal").html(result.list.smtj.length+"人");
				          $("#zftotal").html(result.list.zftotal+"条");
				          $("#videototal").html(result.list.zftotal+"个");
				          $("#moneytotal").html(result.list.moneytotal.length+"个");
				          var content = 0;
				          for(var i=0; i <result.list.moneytotal.length; i++){
				              content += parseFloat(result.list.moneytotal[i].content);
				          }
				          $("#content").html("￥"+content+"元");
				          getDate(result.list.totalPerson,result.list.personwd,result.list.smtj.length);
				     }
				}
		 });
    }
</script>
<body ontouchstart style="background:#efefef;" onload="init()">
	<div class="container" id="container">
		<div class="page" id="pageContainer">
			<h4 class="data_tit">婚礼邀请</h4>
			<div class="data_side">
				<div id="mychart"></div>
			</div>
			<div class="data_video">
				<div class="data_video_tit">
					<img src="${rc.contextPath}/statics/marry/img/code_amount.png" />
					扫码统计
				</div>
				<div class="data_video_amount">
					<a href="code_amount.html">
						扫码总计<span id="smtotal">0人</span>
					</a>
				</div>
			</div>
			<div class="data_video">
				<div class="data_video_tit">
					<img src="${rc.contextPath}/statics/marry/img/message.png" />
					祝福统计
				</div>
				<div class="data_video_amount">
					祝福总计<span id="zftotal">0条</span>
				</div>
			</div>
			<div class="data_video">
				<div class="data_video_tit">
					<img src="${rc.contextPath}/statics/marry/img/video.png" />
					视频统计
				</div>
				<div class="data_video_amount">
					视频总计<span id="videototal">0个</span>
				</div>
			</div>
			<div class="data_packet">
				<div class="data_packet_tit">
					<img src="${rc.contextPath}/statics/marry/img/packet.png" />
					红包统计
				</div>
				<div class="data_packet_amount" style="border-bottom: 1px solid #F4F4F4;">
					红包总计<span id="moneytotal">0个</span>
				</div>
				<div class="data_packet_amount" style="border-bottom: 1px solid #F4F4F4;">
					红包金额<span id="content">0元</span>
				</div>
				<div class="data_packet_amount">
					<button class="tixian" type="button">提现</button>
				</div>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript">
	var myChart = echarts.init(document.getElementById('mychart'));
	function getDate(totalPerson,personwd,smtj){
	     option = {
			title : {
		        text: '邀请嘉宾总数',
		        subtext: totalPerson+'人',
		        x:'center'
		    },
		    tooltip: {
		        trigger: 'item',
		        formatter: "{a} <br/>{b}: {c} ({d}%)"
		    },
		    legend: {
		        orient: 'vertical',
		        x: '10px',
		        data:['应到人数','实到人数','未到人数']
		    },
		    series: [
		        {
		            name:'嘉宾',
		            type:'pie',
		            radius: ['50%', '70%'],
		            center: ['50%','60%'],
		            avoidLabelOverlap: false,
		            label: {
		                normal: {
		                    show: false,
		                    position: 'center'
		                },
		                emphasis: {
		                    show: true,
		                    textStyle: {
		                        fontSize: '24',
		                    }
		                }
		            },
		            labelLine: {
		                normal: {
		                    show: false
		                }
		            },
		            data:[
		                {value:totalPerson, name:'应到人数'},
		                {value:smtj, name:'实到人数'},
		                {value:personwd, name:'未到人数'},
		            ]
		        }
		    ]
		};
		myChart.setOption(option);
	}
	

</script>
</html>