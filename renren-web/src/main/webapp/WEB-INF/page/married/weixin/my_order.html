<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>“码”上结婚</title>
    <link rel="stylesheet" href="${rc.contextPath}/statics/marry/css/weui.min.css"/>
    <link rel="stylesheet" href="${rc.contextPath}/statics/marry/css/marry.css"/>
    <script type="text/javascript" src="${rc.contextPath}/statics/marry/js/reset.js"></script>
    <script type="text/javascript" src="${rc.contextPath}/statics/marry/js/jquery-1.9.1.min.js"></script>
    <style type="text/css">
		.side{display: none;}
    </style>
</head>
<script type="text/javascript">
    $(function(){
         $.ajax({
				type: "POST",
				url: "../weixin/order/findOrderlist",
				dataType: "json",
				success: function(result){
					if(result.status == 'ok'){
					    var totallist="";
					    for(var i = 0; i < result.list.length; i++){
					        if(result.list[i].orderType == 1){
					             totallist += '<div class="cart_con weui-panel weui-panel_access" style="margin-top:10px;">'+
					                          '<div class="cart_tit" ><p>订单号：<span>'+result.list[i].orderNumber+'</span>';
					                          if(result.list[i].states == '1'){
					                              totallist +=  '<span class="check_part">删除</span>';
					                          }
					             totallist +=  '</p>'+'</div><div class="weui-panel__bd">'+
					                          
					                          '<a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.4rem;color:rgb(255, 67, 103);">'+
					                          result.list[i].business+'</a><a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">'+
					                          '<div class="weui-media-box__hd">'+
					                          '<img class="weui-media-box__thumb" src="'+result.list[i].marryMainList[0].pic+'" alt=""></div>'+
					                          '<div class="weui-media-box__bd"><h4 class="weui-media-box__title">'+result.list[i].marryMainList[0].title+'</h4>'+
					                          '<p class="weui-media-box__desc">'+result.list[i].marryMainList[0].author+'</p>'+
					                          '<p class="weui-media-box__desc">价格：<span class="sub">'+result.list[i].marryMainList[0].price+'</span></p></div></a>'+
					                          
					                          '<a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">'+
					                          '<div style="width:100%;text-align:right;">下单时间：<span style="font-size:0.4rem; ">'+result.list[i].gmtModifiedtime+'</span></div>'+
					                          '</a><a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">'+
					                          '<div style="width:100%;text-align:right;">共<span>1</span>件商品&nbsp;&nbsp;实付款：<span style="font-size:0.4rem; ">￥'+result.list[i].mainPrice+'元</span>';
					                          if(result.list[i].states == '0'){
					                               totallist += '<button id="del" onclick="toPay('+result.list[i].id+')" style="margin-left:0.2rem;background:#fe4567;" class="weui-btn weui-btn_mini weui-btn_warn" type="button">去付款</button>';
					                          }
					                          totallist +='</div>'+
					                          ' </a></div></div>';
					        }else if(result.list[i].orderType == 2){
					              var priceTotal = 0;
					              totallist += '<div class="cart_con weui-panel weui-panel_access" style="margin-top:10px;">'+
					                          '<div class="cart_tit" ><p>订单号：<span>'+result.list[i].orderNumber+'</span>';
					                          if(result.list[i].states == '1'){
					                              totallist +=  '<span class="check_part">删除</span>';
					                          }
					             totallist +=  '</p>'+'</div><div class="weui-panel__bd">';
					                          for(var j=0;j<result.list[i].marryMainList.length; j++){
					                             priceTotal += parseFloat(result.list[i].marryMainList[j].price);
					                             totallist +=  '<a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.4rem;color:rgb(255, 67, 103);">'+
						                          result.list[i].marryMainList[j].username+'</a><a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">'+
						                          '<div class="weui-media-box__hd">'+
						                          '<img class="weui-media-box__thumb" src="'+result.list[i].marryMainList[j].pic+'" alt=""></div>'+
						                          '<div class="weui-media-box__bd"><h4 class="weui-media-box__title">'+result.list[i].marryMainList[j].title+'</h4>'+
						                          '<p class="weui-media-box__desc">'+result.list[i].marryMainList[j].author+'</p>'+
						                          '<p class="weui-media-box__desc">价格：<span class="sub">'+result.list[i].marryMainList[j].price+'</span></p></div></a>';
					                          }
					                          
					                          totallist += '<a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">'+
					                          '<div style="width:100%;text-align:right;">下单时间：<span style="font-size:0.4rem; ">'+result.list[i].gmtModifiedtime+'</span></div>'+
					                          '</a><a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">'+
					                          '<div style="width:100%;text-align:right;">共<span>'+result.list[i].marryMainList.length+'</span>件商品&nbsp;&nbsp;实付款：<span style="font-size:0.4rem; ">￥'+priceTotal+'元</span>';
					                          if(result.list[i].states == '0'){
					                               totallist += '<button id="del" onclick="toPay('+result.list[i].id+')" style="margin-left:0.2rem;background:#fe4567;" class="weui-btn weui-btn_mini weui-btn_warn" type="button">去付款</button>';
					                          }
					                          totallist +='</div>'+
					                          ' </a></div></div>';
					        }
					        $("#totallist").html(totallist);
					    }
					}
				}
		});
    });
    
    function toPay(id){
        window.location.href="confirm_order1.html?orderId="+id;//将订单id传过去
    }
</script>
<body ontouchstart style="background:#efefef;">
	<div class="container" id="container">
		<div class="page" id="pageContainer">
			<div class="page" id="pageContainer" style="display:flex;" >
				<div class="bless_tit">
	                <ul class="weui-flex" id="nav">
	                    <li class="weui-flex__item"><span class="active">全部</span></li>
	                    <li class="weui-flex__item"><span>待付款</span></li>
	                    <li class="weui-flex__item"><span>已完成</span></li>
	                </ul>
	            </div>
			</div>
			<!-- 全部 -->
			<div class="side" style="flex:1;margin-top:1.2rem;display:block;" id="totallist">
			</div>
			<!-- 待付款 -->
			<div class="side" style="flex:1;margin-top:1.2rem;">
				<div class="cart_con weui-panel weui-panel_access" style="margin-top:10px;">
					<div class="cart_tit">
						<p><span class="shangjia">伊人婚礼2</span><span class="check_part">删除</span></p>
					</div>
					<div class="weui-panel__bd">
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
		                    <div class="weui-media-box__hd">
		                        <img class="weui-media-box__thumb" src="${rc.contextPath}/statics/marry/img/theme1.png" alt="">
		                    </div>
		                    <div class="weui-media-box__bd">
		                        <h4 class="weui-media-box__title">粉蓝密爱</h4>
		                        <p class="weui-media-box__desc">设计师</p>
		                        <p class="weui-media-box__desc">价格：<span class="sub">100</span></p>
		                    </div>
		                </a>
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
		                    <div class="weui-media-box__hd">
		                        <img class="weui-media-box__thumb" src="${rc.contextPath}/statics/marry/img/theme1.png" alt="">
		                    </div>
		                    <div class="weui-media-box__bd">
		                        <h4 class="weui-media-box__title">粉蓝密爱</h4>
		                        <p class="weui-media-box__desc">设计师</p>
		                        <p class="weui-media-box__desc">价格：<span class="sub">1000</span></p>
		                    </div>
		                </a>
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">
		                    <p>订单号：<span>15245645645645</span>&nbsp;&nbsp;</p>
		                </a>
		                 <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">
		                    下单时间：<span style="font-size:0.4rem; ">2018-01-03 10:20</span>
		                </a>
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">
		                    <div style="width:100%;text-align:right;">共<span>1</span>件商品&nbsp;&nbsp;待付款：<span style="font-size:0.4rem; ">￥39.00</span><button id="del" style="margin-left:0.2rem;background:#fe4567;" class="weui-btn weui-btn_mini weui-btn_warn" type="button">去付款</button></div>
		                </a>
		            </div>
				</div>
				<div class="cart_con weui-panel weui-panel_access" style="margin-top:10px;">
					<div class="cart_tit">
						<p><span class="shangjia">伊人婚礼1</span><span class="check_part">删除</span></p>
					</div>
					<div class="weui-panel__bd">
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
		                    <div class="weui-media-box__hd">
		                        <img class="weui-media-box__thumb" src="${rc.contextPath}/statics/marry/img/theme1.png" alt="">
		                    </div>
		                    <div class="weui-media-box__bd">
		                        <h4 class="weui-media-box__title">粉蓝密爱</h4>
		                        <p class="weui-media-box__desc">设计师</p>
		                        <p class="weui-media-box__desc">价格：<span class="sub">100</span></p>
		                    </div>
		                </a>
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
		                    <div class="weui-media-box__hd">
		                        <img class="weui-media-box__thumb" src="${rc.contextPath}/statics/marry/img/theme1.png" alt="">
		                    </div>
		                    <div class="weui-media-box__bd">
		                        <h4 class="weui-media-box__title">粉蓝密爱</h4>
		                        <p class="weui-media-box__desc">设计师</p>
		                        <p class="weui-media-box__desc">价格：<span class="sub">1000</span></p>
		                    </div>
		                </a>
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">
		                    <p>订单号：<span>15245645645645</span>&nbsp;&nbsp;</p>
		                </a>
		                 <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">
		                    下单时间：<span style="font-size:0.4rem; ">2018-01-03 10:20</span>
		                </a>
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">
		                    <div style="width:100%;text-align:right;">共<span>1</span>件商品&nbsp;&nbsp;待付款：<span style="font-size:0.4rem; ">￥39.00</span><button id="del" style="margin-left:0.2rem;background:#fe4567;" class="weui-btn weui-btn_mini weui-btn_warn" type="button">去付款</button></div>
		                </a>
		            </div>
				</div>
			</div>
			<!-- 已完成 -->
			<div class="side" style="flex:1;margin-top:1.2rem;">
				<div class="cart_con weui-panel weui-panel_access" style="margin-top:10px;">
					<div class="cart_tit">
						<p><span class="shangjia">伊人婚礼3</span><span class="check_part">删除</span></p>
					</div>
					<div class="weui-panel__bd">
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
		                    <div class="weui-media-box__hd">
		                        <img class="weui-media-box__thumb" src="${rc.contextPath}/statics/marry/img/theme1.png" alt="">
		                    </div>
		                    <div class="weui-media-box__bd">
		                        <h4 class="weui-media-box__title">粉蓝密爱</h4>
		                        <p class="weui-media-box__desc">设计师</p>
		                        <p class="weui-media-box__desc">价格：<span class="sub">100</span></p>
		                    </div>
		                </a>
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
		                    <div class="weui-media-box__hd">
		                        <img class="weui-media-box__thumb" src="${rc.contextPath}/statics/marry/img/theme1.png" alt="">
		                    </div>
		                    <div class="weui-media-box__bd">
		                        <h4 class="weui-media-box__title">粉蓝密爱</h4>
		                        <p class="weui-media-box__desc">设计师</p>
		                        <p class="weui-media-box__desc">价格：<span class="sub">1000</span></p>
		                    </div>
		                </a>
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">
		                    <p>订单号：<span>15245645645645</span>&nbsp;&nbsp;</p>
		                </a>
		                 <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">
		                    下单时间：<span style="font-size:0.4rem; ">2018-01-03 10:20</span>
		                </a>
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">
		                    <div style="width:100%;text-align:right;">共<span>1</span>件商品&nbsp;&nbsp;实付款：<span style="font-size:0.4rem; ">￥39.00</span></div>
		                </a>
		            </div>
				</div>
				<div class="cart_con weui-panel weui-panel_access" style="margin-top:10px;">
					<div class="cart_tit">
						<p><span class="shangjia">伊人婚礼1</span><span class="check_part">删除</span></p>
					</div>
					<div class="weui-panel__bd">
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
		                    <div class="weui-media-box__hd">
		                        <img class="weui-media-box__thumb" src="${rc.contextPath}/statics/marry/img/theme1.png" alt="">
		                    </div>
		                    <div class="weui-media-box__bd">
		                        <h4 class="weui-media-box__title">粉蓝密爱</h4>
		                        <p class="weui-media-box__desc">设计师</p>
		                        <p class="weui-media-box__desc">价格：<span class="sub">100</span></p>
		                    </div>
		                </a>
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg">
		                    <div class="weui-media-box__hd">
		                        <img class="weui-media-box__thumb" src="${rc.contextPath}/statics/marry/img/theme1.png" alt="">
		                    </div>
		                    <div class="weui-media-box__bd">
		                        <h4 class="weui-media-box__title">粉蓝密爱</h4>
		                        <p class="weui-media-box__desc">设计师</p>
		                        <p class="weui-media-box__desc">价格：<span class="sub">1000</span></p>
		                    </div>
		                </a>
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">
		                    <p>订单号：<span>15245645645645</span>&nbsp;&nbsp;</p>
		                </a>
		                 <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">
		                    下单时间：<span style="font-size:0.4rem; ">2018-01-03 10:20</span>
		                </a>
		                <a href="javascript:void(0);" class="weui-media-box weui-media-box_appmsg" style="font-size:0.35rem;">
		                    <div style="width:100%;text-align:right;">共<span>1</span>件商品&nbsp;&nbsp;实付款：<span style="font-size:0.4rem; ">￥39.00</span></div>
		                </a>
		            </div>
				</div>
			</div>
		</div>
	</div>
	<div class="js_dialog" id="iosDialog1" style="display: none;">
        <div class="weui-mask"></div>
        <div class="weui-dialog">
            <div class="weui-dialog__hd"><strong class="weui-dialog__title">提醒</strong></div>
            <div class="weui-dialog__bd">确定删除该订单？</div>
            <div class="weui-dialog__ft">
                <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default quxiao">取消</a>
                <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary sure">确认</a>
            </div>
        </div>
    </div>
</body>
<script type="text/javascript">
	/*导航*/
	$('#nav li').on("click",function(){
        var index = $(this).prevAll().length;
        $(this).find('span').addClass('active');
        $(this).siblings().find('span').removeClass('active');
        $(".side").hide();
        $(".side").eq(index).show();	
    });
    /*删除*/
    $(".check_part").on("click",function(){
    	var node = $(this);
    	$("#iosDialog1").show();
    	$(".quxiao").on("click",function(){
    		$("#iosDialog1").hide();
    	});
    	$(".sure").on("click",function(){
    		node.parents(".cart_con").remove();
    		$("#iosDialog1").hide();
    	});
    });
</script>
</html>