<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>微人生相册</title>
    <link rel="stylesheet" href="http://cdn.bootcss.com/weui/1.1.1/style/weui.min.css">
	<link rel="stylesheet" href="./example.css"/>
</head>
<body ontouchstart>
	<div class="weui-toptips weui-toptips_warn js_tooltips">错误提示</div>
	<div class="container" id="container">
		<div class="page">
			<div class="page__hd">
				<h1 class="page__title">用户注册</h1>
			</div>
			<div class="page__bd">
				<div class="weui-cells weui-cells_form">
					<div class="weui-cell">
						<div class="weui-cell__hd"><label class="weui-label">账号</label></div>
						<div class="weui-cell__bd">
							<input class="weui-input" id="account" type="text"  pattern="{12}" required="required" placeholder="请输6-12位字母"/>
						</div>
						<div class="weui-cell__ft">
							<i class="weui-icon-warn"></i>
						</div>
					</div>
					<div class="weui-cell">
						<div class="weui-cell__hd"><label class="weui-label">密码</label></div>
						<div class="weui-cell__bd">
							<input class="weui-input" id="password" type="password" pattern="[0-9]*" placeholder="请输入6-12位密码"/>
						</div>
						<div class="weui-cell__ft">
							<i class="weui-icon-warn"></i>
						</div>
					</div>
					<div class="weui-cell">
						<div class="weui-cell__hd"><label class="weui-label">确认密码</label></div>
						<div class="weui-cell__bd">
							<input class="weui-input" id="passwordb" type="password" pattern="[0-9]*" placeholder="请再次输入密码"/>
						</div>
						<div class="weui-cell__ft">
							<i class="weui-icon-warn"></i>
						</div>
					</div>
					<div class="weui-cell weui-cell_vcode">
						<div class="weui-cell__hd"><label class="weui-label">验证码</label></div>
						<div class="weui-cell__bd">
							<input class="weui-input" id="code" type="text" placeholder="请输入验证码"/>
						</div>
						<div class="weui-cell__ft">
							<img class="weui-vcode-img" src="./images/vcode.jpg" />
						</div>
					</div>
				</div>
				<div class="weui-cells__title"></div>
				<label for="weuiAgree" class="weui-agree">
					<input id="weuiAgree" type="checkbox"  class="weui-agree__checkbox">
					<span class="weui-agree__text">
						阅读并同意<a href="javascript:void(0);">《注册相关条款》</a>
					</span>
				</label>
				
				<div class="page__hd">
				</div>
				<div class="weui-btn-area">
					<a class="weui-btn weui-btn_primary" href="javascript:" id="showTooltips">注册</a>
				</div>
			</div>
			<div id="dialogs">
        <!--BEGIN dialog1-->
        <div class="js_dialog" id="iosDialog1" style="display: none;">
            <div class="weui-mask"></div>
            <div class="weui-dialog">
                <div class="weui-dialog__hd"><strong class="weui-dialog__title">弹窗标题</strong></div>
                <div class="weui-dialog__bd">弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内</div>
                <div class="weui-dialog__ft">
                    <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default">辅助操作</a>
                    <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">主操作</a>
                </div>
            </div>
        </div>
        <!--END dialog1-->
        <!--BEGIN dialog2-->
        <div class="js_dialog" id="iosDialog2" style="display: none;">
            <div class="weui-mask"></div>
            <div class="weui-dialog">
                <div class="weui-dialog__bd">弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内</div>
                <div class="weui-dialog__ft">
                    <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">知道了</a>
                </div>
            </div>
        </div>
        <!--END dialog2-->
        <!--BEGIN dialog3-->
        <div class="js_dialog" id="androidDialog1" style="display: none;">
            <div class="weui-mask"></div>
            <div class="weui-dialog weui-skin_android">
                <div class="weui-dialog__hd"><strong class="weui-dialog__title">弹窗标题</strong></div>
                <div class="weui-dialog__bd">
                    弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内
                </div>
                <div class="weui-dialog__ft">
                    <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default">辅助操作</a>
                    <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">主操作</a>
                </div>
            </div>
        </div>
        <!--END dialog3-->
        <!--BEGIN dialog4-->
        <div class="js_dialog" id="androidDialog2" style="display: none;">
            <div class="weui-mask"></div>
            <div class="weui-dialog weui-skin_android">
                <div class="weui-dialog__bd">
                    弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内
                </div>
                <div class="weui-dialog__ft">
                    <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_default">辅助操作</a>
                    <a href="javascript:;" class="weui-dialog__btn weui-dialog__btn_primary">主操作</a>
                </div>
            </div>
        </div>
        <!--END dialog4-->
    </div>
		</div>
	</div>
	
	
    <script src="http://cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script>
	
	<script>
		$(function(){
			$('.page').css('opacity','1');
			
			$('#dialogs').on('click', '.weui-dialog__btn', function(){
				$(this).parents('.js_dialog').fadeOut(200);
			});
			// 验证表单提交
			$('#showTooltips').on('click', function(){
				var account = $("#account").val();
				var password = $("#password").val();
				var passwordb = $("#passwordb").val();
				//var weuiAgree = $("#weuiAgree").val();
				var code = $("#code").val();
				
				// 先设置为所有都不提示
				$('.weui-cell').attr('class', 'weui-cell');
				
				if(account === null || account === "" || account.indexOf(' ')>0){
			
					//$("#account").parent().parent().addClass("weui-cell_warn");
					var $acc = $("#account").parent().parent();
					forWarm($acc, '账号输入错误');
					return ;
				}
				
				if(password === null || password === "" || password.indexOf(' ')>0){
					//$("#password").parent().parent().addClas("weui-cell_warn");
					var $pas = $("#password").parent().parent();
					forWarm($pas, '密码输入错误');
					return ;
				}
				
				if(password !== passwordb){
					//$("#password").parent().parent().addClas("weui-cell_warn");
					
					forWarm(null, '两此输入密码不相同');
					return ;
				}
				
				if(code === null || code === "" || code.indexOf(' ')>0){
					//$("#password").parent().parent().addClas("weui-cell_warn");
					//var $pas = $("#password").parent().parent();
					forWarm($pas, '请输入验证码');
					return ;
				}
				
				if(!$("#weuiAgree").is(':checked')){
					//$("#password").parent().parent().addClas("weui-cell_warn");
					
					forWarm(null, '请同意用户注册协议');
					return ;
				}
				
				$("#iosDialog2").fadeIn(200);
			});
		});
		
		//  验证数据
		// obj 需要修改css的对象，必须是jquery对象，msg是错误提示内容
		function forWarm(obj,msg){
			var $tooltips = $('.js_tooltips');
			
			if ($tooltips.css('display') === 'none'){
				
				// toptips的fixed, 如果有`animation`, `position: fixed`不生效
				$('.page.cell').removeClass('slideIn');
				
				$tooltips.text(msg);
				$tooltips.css('display', 'block');
				
				setTimeout(function () {
					$tooltips.css('display', 'none');
					$tooltips.text("错误提示");
				}, 2000);
			}
			// 输入框提示
			if(typeof(obj) != 'undefined' && obj != null){
					obj.addClass("weui-cell_warn");
			}
		}
		
	</script>
</body>
</html>
